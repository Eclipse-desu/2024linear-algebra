\definecolor{shadecolor}{RGB}{241, 241, 255}
\newcounter{problemname}
\newenvironment{problem}{%
  \refstepcounter{problemname}%
  \begin{shaded}\par\noindent\textbf{题目\arabic{problemname}. }%
}{%
  \end{shaded}\par
}

\newenvironment{problem*}{%
  \begin{shaded}\par\noindent%
}{%
  \end{shaded}\par
}
\newenvironment{solution}{\par\noindent\textbf{解答. }}{\par}
\newenvironment{solution*}{\par\noindent\textbf{解答. }\par}{\par}

\BeforeBeginEnvironment{tcolorbox}{\savenotes}
\AfterEndEnvironment{tcolorbox}{\spewnotes}
\definecolor{thmcolor}{RGB}{255, 228, 225}
\definecolor{defcolor}{RGB}{255, 236, 139}

% \newtheorem{theorem}{定理}[section]
% \newtheorem{definition}[theorem]{定义} 
% \newtheorem{lemma}[theorem]{引理}
% \newtheorem{corollary}[theorem]{推论}
% \newtheorem{example}[section]{例}
% \newtheorem{proposition}[theorem]{性质}

\newcounter{theorem}
% \newenvironment{theorem}{\begin{tcolorbox}[colback=thmcolor] \stepcounter{theorem}\par\noindent\textbf{定理\arabic{section}.\arabic{theorem}. }}{\end{tcolorbox}\par}
\newenvironment{theorem}[1][]
{
    \refstepcounter{theorem}
    \begin{tcolorbox}[colback=thmcolor]
    \par\noindent\textbf{定理\arabic{theorem}}%
    \ifthenelse{\equal{#1}{}}{}{ \textnormal{(#1)}}
}
{
    \end{tcolorbox}
    \par
}

\newenvironment{definition}[1][]
{
    \refstepcounter{theorem}
    \begin{tcolorbox}[colback=defcolor]
    \par\noindent\textbf{定义\arabic{theorem}}%
    \ifthenelse{\equal{#1}{}}{}{ \textnormal{(#1)}}
}
{
    \end{tcolorbox}
    \par
}

\newenvironment{lemma}[1][]
{
    \refstepcounter{theorem}
    \begin{tcolorbox}[colback=thmcolor]
    \par\noindent\textbf{引理\arabic{theorem}}%
    \ifthenelse{\equal{#1}{}}{}{ \textnormal{(#1)}}\\
}
{
    \end{tcolorbox}
    \par
}

\newenvironment{corollary}[1][]
{
    \refstepcounter{theorem}
    \begin{tcolorbox}[colback=thmcolor]
    \par\noindent\textbf{推论\arabic{theorem}}%
    \ifthenelse{\equal{#1}{}}{}{ \textnormal{(#1)}}\\
}
{
    \end{tcolorbox}
    \par
}

\newenvironment{proposition}[1][]
{
    \refstepcounter{theorem}
    \begin{tcolorbox}[colback=thmcolor]
    \par\noindent\textbf{性质\arabic{section}.\arabic{theorem}}%
    \ifthenelse{\equal{#1}{}}{}{ \textnormal{(#1)}}\\
}
{
    \end{tcolorbox}
    \par
}

% \newenvironment{definition}{\begin{tcolorbox}[colback=defcolor] \stepcounter{theorem}\par\noindent\textbf{定义\arabic{section}.\arabic{theorem}. }}{\end{tcolorbox}\par}
% \newenvironment{lemma}{\begin{tcolorbox}[colback=thmcolor] \stepcounter{theorem}\par\noindent\textbf{引理\arabic{section}.\arabic{theorem}. }}{\end{tcolorbox}\par}
% \newenvironment{corollary}{\begin{tcolorbox}[colback=thmcolor] \stepcounter{theorem}\par\noindent\textbf{推论\arabic{section}.\arabic{theorem}. }}{\end{tcolorbox}\par}
% \newenvironment{proposition}{\begin{tcolorbox}[colback=thmcolor] \stepcounter{theorem}\par\noindent\textbf{性质\arabic{section}.\arabic{theorem}. }}{\end{tcolorbox}\par}